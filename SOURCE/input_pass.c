#include"config.h"
#include"input_pass.h"

int Input_Vis(char *ip,int x,int y,int lim,int color) //è¾“å…¥å†…å®¹ï¼Œè¾“å…¥æ¡†å·¦ä¸Šè§’åæ ‡x,yï¼Œå­—æ•°é™åˆ¶ï¼Œè¾“å…¥æ¡†é¢œè‰?
{                                                      //æ³¨æ„ï¼šè¯¥è¾“å…¥å‡½æ•°è¦æ±‚è¾“å…¥æ¡†å®½åº¦ä¸º25
	int i=0;
	int j=0;                                           //è®°å½•è¾“å…¥æ•?
	char c;                                            //è¯»å–é”®ç›˜è¾“å…¥çš„å†…å®?
	clrmous(MouseX, MouseY);
	setcolor(WHITE);                                   //è®¾ç½®æ˜¾ç¤ºå­—ä½“ä¸ºç™½è‰?
	setlinestyle(SOLID_LINE,0,NORM_WIDTH);             //è®¾ç½®çº¿å‹
	setfillstyle(SOLID_FILL,color);                    //ä¿æŒå¡«å……é¢œè‰²ä¸è¾“å…¥æ¡†é¢œè‰²ä¸€è‡?
	settextstyle(TRIPLEX_FONT,HORIZ_DIR,2);
	settextjustify(LEFT_TEXT,TOP_TEXT);
	line(x+10,y+6,x+10,y+20);                          //ç”»è¾“å…¥æç¤ºå…‰æ ‡ï¼ˆåœ¨ç»™å®šåæ ‡å‘å?10ä¸ªåƒç´ ç‚¹ï¼Œç”»ä¸€æ¡é•¿14ä¸ªåƒç´ ç‚¹çš„ç«–çº?
 	while(bioskey(1))
	{
		i=bioskey(0);
	}
	while(1)
	{
	    c=bioskey(0);                                  //è¯»å–é”®ç›˜è¾“å…¥å†…å®¹
		if(j<lim)
		{
			if(c!='\n'&&c!='\r'&&c!=' '&&c!=033)       //å¦‚æœè¯»å…¥éæ¢è¡Œã€å›è½¦ã€ç©ºæ ¼æˆ–é€€å‡?
			{
				if(c!='\b')                            //å¦‚æœè¯»å…¥éé€€æ ?
				{
					if((c>='0'&&c<='9')||(c>='a'&&c<='z'))
				  	{
					  	*(ip+j)=c;                         //å°†è¯»å…¥çš„cå­˜å…¥è¾“å…¥å†…å®¹å­—ç¬¦ä¸²ip
						*(ip+j+1)='\0';                    //ç»“æŸå­—ç¬¦ä¸²ip
						bar(x+8+j*18,y+3,x+12+j*18,y+24);  //æ¸…é™¤å…‰æ ‡ï¼ˆæ³¨æ„åœ¨åŸå…‰æ ‡åæ ‡ä¸ŠåŠ ä¸Šå·²ç»è¾“å…¥çš„å†…å®¹ï¼‰
						outtextxy(x+8+j*18,y-1,ip+j);      //åœ¨è¾“å…¥æ¡†ä¸­æ˜¾ç¤ºè¾“å…¥çš„å­—ç¬¦ï¼ˆåœ¨å…¶å®å…‰æ ‡å³ä¾§j*18å¤„ç”»å­—ç¬¦ï¼?
						j++;                               //è¾“å…¥æ•°åŠ ä¸€
						line(x+10+j*18,y+6,x+10+j*18,y+20);//åœ¨æ–°è¾“å…¥çš„å­—ç¬¦åé‡ç”»å…‰æ ‡
				  	}
				  	else
				  	{
						return  100;
				  	}
				}
				else if(c=='\b'&&j>0)                 //å¦‚æœè¯»å…¥é€€æ ?
				{
					bar(x-10+j*18,y+3,x+7+j*18,y+24);  //æ¸…é™¤ä¸Šä¸€è¾“å…¥å­—ç¬¦
					bar(x+8+j*18,y+3,x+12+j*18,y+24);  //æ¸…é™¤å…‰æ ‡
					j--;                               //è¾“å…¥æ•°å‡ä¸€
					line(x+10+j*18,y+6,x+10+j*18,y+20);//åœ¨ä¸Šä¸€è¾“å…¥çš„å­—ç¬¦åé‡ç”»å…‰æ ‡
					*(ip+j)='\0';                      //æ¸…é™¤å­—ç¬¦ä¸²ipè¯»å…¥çš„ä¸Šä¸€å­—ç¬¦
					*(ip+j+1)='\0';                    //ç»“æŸå­—ç¬¦ä¸²ip
				}
			}
			else                                       //å¦‚æœè¯»å…¥æ¢è¡Œã€å›è½¦ã€ç©ºæ ¼æˆ–é€€å‡?
			{
				setfillstyle(SOLID_FILL, color);       //ç»“æŸå½“å‰è¾“å…¥æ“ä½œ
				bar(x+8+j*18,y+3,x+12+j*18,y+24);      //æ¸…é™¤å…‰æ ‡
				break;
			}
		}
		else if(j>=lim)                               //å¦‚æœè¾¾åˆ°è¾“å…¥é™åˆ¶
		{
			if(c!='\n'&&c!='\r'&&c!=' '&&c!=033)      //å…¶ä½™åŠŸèƒ½ä¸å˜
			{                                         //è¯»å…¥é™¤æ¢è¡Œã€å›è½¦ã€ç©ºæ ¼ã€é€€å‡ºæˆ–é€€æ ¼ä»¥å¤–å­—ç¬¦ä¸å†å­˜å‚¨ä¸æ˜¾ç¤º
				if(c=='\b'&&j>0)
				{
					bar(x+8+j*18,y+3,x+12+j*18,y+24);
					bar(x-10+j*18,y+3,x+7+j*18,y+24);
					j--;
					line(x+10+j*18,y+6,x+10+j*18,y+20);
					*(ip+j)='\0';
				}
			}
			else
			{
				setfillstyle(SOLID_FILL, color);
				bar(x+8+j*18,y+3,x+12+j*18,y+24);
				break;
			}
		}
	}
	return 200;
}
int Input_Invis(char* ip,int x,int y,int lim,int color)//å¤§ä½“ä¸Input_Viså‡½æ•°ç›¸åŒï¼Œä»…å¯¹æ˜¾ç¤ºçš„å­—ç¬¦åšä¸å¯è§†å¤„ç†
{
	
	int i=0;
	int j=0;                                           //è®°å½•è¾“å…¥æ•?
	char c;                                            //è¯»å–é”®ç›˜è¾“å…¥çš„å†…å®?
	clrmous(MouseX, MouseY);
	setfillstyle(SOLID_FILL,color);                    //è®¾ç½®å¡«å……å½¢å¼
	setlinestyle(SOLID_LINE,0,NORM_WIDTH);             //è®¾ç½®çº¿å‹
	setcolor(WHITE);                                   //è®¾ç½®è¾“å‡ºå½¢å¼
	settextstyle(TRIPLEX_FONT,HORIZ_DIR,2);
	settextjustify(LEFT_TEXT,TOP_TEXT);
	line(x+10,y+6, x+10,y+20);                         //ç”»è¾“å…¥æç¤ºå…‰æ ?
	while(bioskey(1))
	{
		i=bioskey(0);
	}
	while(1)
	{
	    c=bioskey(0);                                  //è¯»å–é”®ç›˜è¾“å…¥å†…å®¹
		if(j<lim)
		{
			if(c!='\n'&&c!='\r'&&c!=' '&&c!=033)      //å¦‚æœè¯»å…¥éæ¢è¡Œã€å›è½¦ã€ç©ºæ ¼æˆ–é€€å‡?
			{
				if(c!='\b')                           //å¦‚æœè¯»å…¥éé€€æ ?
				{
					if((c>='0'&&c<='9')||(c>='a'&&c<='z'))
				  	{
				  		*(ip+j) =c;                        //å°†è¯»å…¥çš„cå­˜å…¥è¾“å…¥å†…å®¹å­—ç¬¦ä¸²ip
						*(ip+j+1) = '\0';                  //ç»“æŸå­—ç¬¦ä¸²ip
						bar(x+8+j*18,y+3,x+12+j*18,y+24);  //æ¸…é™¤å…‰æ ‡
						outtextxy(x+8+j*18,y+4,"*");       //åœ¨è¾“å…¥æ¡†ä¸­æ˜¾ç¤ºå­—ç¬¦â€?*â€?
						j++;                               //è¾“å…¥æ•°åŠ ä¸€
						line(x+10+j*18,y+6,x+10+j*18,y+20);//é‡ç”»å…‰æ ‡
				 	}
					  else
			        {
				       return 100;
			        }
				}
				else if (c=='\b'&&j>0)                 //å¦‚æœè¯»å…¥é€€æ ?
				{
					bar(x-10+j*18,y+3,x+7+j*18,y+24);  //æ¸…é™¤ä¸Šä¸€è¾“å…¥å­—ç¬¦
					bar(x+8+j*18,y+3,x+12+j*18,y+24);  //æ¸…é™¤å…‰æ ‡
					j--;                               //è¾“å…¥æ•°å‡ä¸€
					line(x+10+j*18,y+6,x+10+j*18,y+20);//é‡ç”»
					*(ip+j)='\0';                      //æ¸…é™¤å­—ç¬¦ä¸²ipè¯»å…¥çš„ä¸Šä¸€å­—ç¬¦
					*(ip+j+1)='\0';                    //ç»“æŸå­—ç¬¦ä¸²ip
				}
			}
			else                                       //å¦‚æœè¯»å…¥æ¢è¡Œã€å›è½¦ã€ç©ºæ ¼æˆ–é€€å‡?
			{
				setfillstyle(SOLID_FILL, color);       //ç»“æŸå½“å‰è¾“å…¥æ“ä½œ
				bar(x+8+j*18,y+3,x+12+j*18,y+24);      //æ¸…é™¤å…‰æ ‡
				break;
			}
		}
		else if(j>=lim)                               //å¦‚æœè¾¾åˆ°è¾“å…¥é™åˆ¶
		{
			if(c!='\n'&&c!='\r'&&c!=' '&&c!=033)      //å…¶ä½™åŠŸèƒ½ä¸å˜
			{                                         //è¯»å…¥é™¤æ¢è¡Œã€å›è½¦ã€ç©ºæ ¼ã€é€€å‡ºæˆ–é€€æ ¼ä»¥å¤–å­—ç¬¦ä¸å†å­˜å‚¨ä¸æ˜¾ç¤º
				if (c=='\b'&&j>0)
				{
					bar(x+8+j*18,y+3,x+12+j*18,y+24);
					bar(x-10+j*18,y+3,x+7+j*18,y+24);
					j--;
					line(x+10+j*18,y+6,x+10+j*18,y+20);
					*(ip+j)='\0';
				}
			}
			else
			{
				setfillstyle(SOLID_FILL, color);
				bar(x+8+j*18,y+3,x+12+j*18,y+24);
				break;
			}
		}
	}
	return 200;
}